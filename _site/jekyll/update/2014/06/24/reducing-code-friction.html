<!doctype html>
<html lang=" en-US ">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge"> <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Reducing code friction in mixed C and C++ cross platform projects | SoftwareBear</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Reducing code friction in mixed C and C++ cross platform projects" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="So I’ve just inherited a very new project where part of the code is written in C and C++, a language I loved but put on the back burner about 12 years ago whilst I concentrated on C# … I have kept up to date with it (C++11) … but it has amazed me how slooooow it is to develop code on this platform … much slower than I remember … especially when there is no code discipline in place." />
<meta property="og:description" content="So I’ve just inherited a very new project where part of the code is written in C and C++, a language I loved but put on the back burner about 12 years ago whilst I concentrated on C# … I have kept up to date with it (C++11) … but it has amazed me how slooooow it is to develop code on this platform … much slower than I remember … especially when there is no code discipline in place." />
<link rel="canonical" href="http://localhost:4000/jekyll/update/2014/06/24/reducing-code-friction.html" />
<meta property="og:url" content="http://localhost:4000/jekyll/update/2014/06/24/reducing-code-friction.html" />
<meta property="og:site_name" content="SoftwareBear" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-06-24T19:00:00+01:00" />
<script type="application/ld+json">
{"@type":"BlogPosting","url":"http://localhost:4000/jekyll/update/2014/06/24/reducing-code-friction.html","headline":"Reducing code friction in mixed C and C++ cross platform projects","dateModified":"2014-06-24T19:00:00+01:00","description":"So I’ve just inherited a very new project where part of the code is written in C and C++, a language I loved but put on the back burner about 12 years ago whilst I concentrated on C# … I have kept up to date with it (C++11) … but it has amazed me how slooooow it is to develop code on this platform … much slower than I remember … especially when there is no code discipline in place.","datePublished":"2014-06-24T19:00:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/jekyll/update/2014/06/24/reducing-code-friction.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=7983de4aeac1d1194228ced03218842378bb59d8">
    <script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
        crossorigin="anonymous"></script>
    <script src="/assets/js/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

</head>

<body>
    <div id="header">
        <h1 align="center" style="margin:10pt 0pt 0pt 0pt">SoftwareBear</h1>
    </div>

    <div class="wrapper">

        <section>

            <p class="post-date">2014-06-24</p>

            <div id="post-title">
                <h1>Reducing code friction in mixed C and C++ cross platform projects</h1>
                <hr>
            </div>

            <div id="post-body">
                <p>So I’ve just inherited a very new project where part of the code is written in C and C++, a language I loved but put on the back burner about 12 years ago whilst I concentrated on C# … I have kept up to date with it (C++11)  … but it has amazed me how slooooow it is to develop code on this platform … much slower than I remember … especially when there is no code discipline in place.</p>

<p>Unfortunately the code I have inherited looks like it was written about 20 years ago … rather than last year.</p>

<p>This frustrates me a lot as it’s just lack of software crafting discipline that has got it into this state so quickly and resulted in code that is so viscous it’s unbelievable.</p>

<p>Some things that we will be doing to help loosen the code up a bit :</p>

<h3 id="unicode">Unicode</h3>
<p>Decide on your standard for text interchange.</p>

<p>UTF8 seems to be the most portable form across the various platforms we use (Win/Mac/Linux).</p>

<p>wchar_t changes size similarly to int, fantastic !</p>

<p>There are new types to combat this, std::u16string and std::u32string … which may or may not be equivalent to std::wstring … depending on your platform.</p>

<h3 id="strings">Strings</h3>
<p>std::basic_string&lt;&gt; is heavenly to most C++ programmers … but those C lovers have their arrays of characters … why would you need anything else … ?</p>

<p>Maybe to avoid dealing with malloc and free or global statics with their threading issues, etc ?</p>

<h3 id="premature-optimising">Premature Optimising</h3>
<p>C/C++ dudes love optimising … even extending it to the source code … boy the compiler must be grateful.</p>

<p>What is the point of making something super optimal if it is only going to execute once per run or maybe a few times … rather than billions of times per run … prefer readable clear code and classes with nice encapsulation.</p>

<h3 id="extern-c">Extern “C”</h3>
<p>This is an abomination these days … you only need this to talk to old libraries that you can’t compile any more.</p>

<p>Prefer using .cpp files and compiling them with a C++ compiler, you get a better language environment and don’t have to keep writing layers of crap to translate C++ down to C … I thought you liked to optimise things ?</p>

<h3 id="resharper">Resharper</h3>
<p>I’ve learnt a lot from the C# world, one tool that is slowly moving into the C++ world is Resharper … heaven sent … this product can currently navigate your code brilliantly … it makes an attempt to do the other stuff that Resharper is excellent at … it’s still in development … has some rough edges … but given the amount I rely on this tool in C# … it will be my best friend forever if they complete the C++ side.</p>

<p>Please give this tool your support … give it a try … feedback your findings to JetBrains.</p>

<h3 id="posix">Posix</h3>
<p>Do you write your system stuff with OS specific stuff and partition it off to separate platforms or use std stuff as much as possible ?</p>

<p>This depends on what you need to do obviously, but it becomes hard to keep all the builds in sync.</p>

<h3 id="macros">Macros</h3>
<p>It’s easy to avoid macros … especially with C++ templates.</p>

<p>Absolutely no need for macros any more.</p>

<p>What about xplatform stuff though … easy … divide your libraries up into generic and OS specific parts … declare everything in the generic … define most of your stuff in the generic library … define the specific stuff twice for each platform … this forces you to think more about doing it and whether you can avoid it … rather than just using a MACRO sledgehammer.</p>

<p>This leaves the code clean and readable … not in a nested spaghetti of #ifdefs.</p>

<h3 id="solid-principles">SOLID Principles</h3>
<p>Yes these apply to C++ too … oh yes they do.</p>

<h3 id="tdd--unit-testing">TDD / Unit Testing</h3>
<p>Get hold of a good Unit Testing library (GoogleTest, CppUnit … there’s lots of them).</p>

<p>Write unit tests.</p>

<p>Preferably before your implement anything.</p>

<p>Simples.</p>

            </div>

        </section>

    </div>

    
</body>

</html>